<div class="grid-container " *ngIf='addProd ; else noPermission'>
	<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "large" color = "#fff" type = "pacman" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>
	<form [formGroup]="productForm" novalidate class="profile" (ngSubmit)="addProduct()">
		<mat-card>
			<mat-card-title>
				<h4>{{ title }} Product</h4>
				<mat-error *ngIf='message!=null'>{{ message }}</mat-error>
				<mat-error *ngFor='let errors of errors | keyvalue'>{{ errors.value }}</mat-error>				
			</mat-card-title> 
			<mat-card-content>
				<mat-card-title>
					<mat-form-field appearance="outline">
						<mat-label>Category</mat-label>
						<mat-select name="food"  formControlName="category">
							<mat-option *ngFor="let cat of categoryList[0]" [value]="cat.id">
								{{cat.name}}
							</mat-option>
						</mat-select>
					</mat-form-field>
				</mat-card-title>  
				<mat-card-title>
					<mat-form-field appearance="outline">
						<mat-label>Name</mat-label>
						<input matInput placeholder="Name" formControlName="name">
						<mat-error *ngIf="productForm.controls['name'].hasError('required')">
						Product Name is <strong>required</strong>
						</mat-error>
					</mat-form-field>
				</mat-card-title>
				<mat-card-title>
					<mat-form-field class="full-width" appearance="outline">
						<mat-label>Description</mat-label>
						<textarea matInput placeholder="description" formControlName="description"></textarea>
						<mat-error *ngIf="productForm.controls['description'].hasError('required')">
							Description is <strong>required</strong>
						</mat-error>
					</mat-form-field>
				</mat-card-title>
				<mat-card-title>
					<mat-form-field class="full-width" appearance="outline">
						<mat-label>Quantity</mat-label>
						<input type='number' matInput placeholder="Quantity" formControlName="quantity" value=0>
						<mat-error *ngIf="productForm.controls['quantity'].hasError('required')">
							Quantity is <strong>required</strong>
						</mat-error>
					</mat-form-field>
				</mat-card-title>
				<mat-card-title>
					<mat-form-field class="full-width" appearance="outline">
						<mat-label>Sale</mat-label>
						<input type='number' matInput placeholder="Sale" formControlName="sale" value=0>
						<mat-error *ngIf="productForm.controls['sale'].hasError('required')">
							Sale is <strong>required</strong>
						</mat-error>
					</mat-form-field>
				</mat-card-title>
				<mat-card-title>
					<mat-form-field class="full-width" appearance="outline">
						<mat-label>Purchase</mat-label>
						<input type='number' matInput placeholder="Purchase" formControlName="purchase" value=0>
						<mat-error *ngIf="productForm.controls['purchase'].hasError('required')">
							Purchase is <strong>required</strong>
						</mat-error>
					</mat-form-field>
				</mat-card-title>
			</mat-card-content>
			<mat-card-actions>
				<button mat-raised-button color="primary" type="submit" [disabled]="!productForm.valid">Save</button>
				<button mat-raised-button color="primary" type="button" (click)="onCancel()">Cancel</button>
			</mat-card-actions>
		</mat-card>
    </form>
</div>
<ng-template class="grid-container" #noPermission>
	<mat-grid-list cols="1" rowHeight="2:1" >
		<mat-grid-tile   colspan='1' class='warning'>
			<h2 >You do not have permission to perform this action </h2>
		</mat-grid-tile>
	</mat-grid-list>
</ng-template>
